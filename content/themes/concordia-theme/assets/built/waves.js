console.clear();class Utils{static randomRange(t,s){return Math.random()*(s-t)+t}static mapRange(t,s,i,e,h,a){return Math.abs(s-i)<Number.EPSILON?e:(t=(t-s)/(i-s)*(h-e)+e,a&&(h<e?t<h?t=h:e<t&&(t=e):h<t?t=h:t<e&&(t=e)),t)}}import{createNoise2D}from"simplex-noise";import alea from"alea";Utils.simplex=createNoise2D(Alea("seed"));class App{constructor(){this.config={bgColor:chroma({h:230,s:.5,l:.92}).hex(),colorSchema:["#5E9FA3","#DCD1B4","#FAB87F","#F87E7B","#B05574"],numOfLayers:9},this.canvas=document.getElementById("c"),this.ctx=this.canvas.getContext("2d"),this.shadowCanvas=document.createElement("canvas"),this.shadowCtx=this.shadowCanvas.getContext("2d"),this.timestamp=0,this.fpsHistory=[],this.setUpVars(),this.setUpListeners(),this.update()}setUpGui(){(new Tweakpane).addFolder({expanded:!1,title:"Settings"}).addInput(this.config,"bgColor")}setUpVars(){this.canvas.width=this.shadowCanvas.width=this.wWidth=window.innerWidth,this.canvas.height=this.shadowCanvas.height=this.wHeight=window.innerHeight,this.wCenterX=this.wWidth/2,this.wCenterY=this.wHeight/2,this.wHypot=Math.hypot(this.wWidth,this.wHeight),this.wMin=Math.min(this.wWidth,this.wHeight),this.angle=.25*Math.PI,this.layers=this.getLayers()}getLayers(){var s=[];let i=0;for(let t=0;t<=this.config.numOfLayers;t++){Math.PI,t,this.config.numOfLayers;s.push({id:t,progress:1-t/this.config.numOfLayers,color:this.config.colorSchema[i]}),++i>=this.config.colorSchema.length&&(i=0)}return s}setUpListeners(){window.addEventListener("resize",this.setUpVars.bind(this))}drawLayer(s,i){var e=Math.round(this.wHypot/10),h=this.wHypot/e,a=4*h;s.save(),s.translate(this.wCenterX,this.wCenterY),s.rotate(Math.sin(this.angle)),s.beginPath(),s.moveTo(-this.wHypot/2,this.wHypot/2-this.wHypot*i.progress),s.lineTo(-this.wHypot/2,this.wHypot/2),s.lineTo(this.wHypot/2,this.wHypot/2),s.lineTo(this.wHypot/2,this.wHypot/2-this.wHypot*i.progress);for(let t=1;t<=e;t++){var o=Utils.simplex.noise3D(.03*t,.03*t,i.id+this.timestamp);s.lineTo(this.wHypot/2-t*h,this.wHypot/2-this.wHypot*i.progress+o*a)}s.closePath(),s.fillStyle=i.color,s.fill(),s.restore()}draw(s){s.save(),s.fillStyle=this.config.bgColor,s.fillRect(0,0,this.wWidth,this.wHeight),s.restore(),this.layers.forEach(t=>this.drawLayer(s,t))}update(t){var s=5e3*this.timestamp;if(t){let s=!1;this.timestamp=t/5e3,this.angle+=.001,this.layers.forEach(t=>{t.progress+=.001,t.progress>1+1/(this.layers.length-1)&&(t.progress=0,s=!0)}),s&&this.layers.push(this.layers.shift()),this.draw(this.shadowCtx)}this.ctx.clearRect(0,0,this.wWidth,this.wHeight),this.ctx.drawImage(this.shadowCanvas,0,0);t=Math.round(1/(t-s)*1e3);this.fpsHistory.unshift(t),this.fpsHistory.length=5,this.ctx.font="16px sans-serif",this.ctx.fillText(this.fpsHistory.reduce((t,s)=>t+s)/5,50,50),window.requestAnimationFrame(this.update.bind(this))}}new App;
//# sourceMappingURL=waves.js.map